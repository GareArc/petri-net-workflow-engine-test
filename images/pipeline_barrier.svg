<svg width="640" height="220" viewBox="0 0 640 220" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="1" dy="1" stdDeviation="1" flood-opacity="0.2"/>
    </filter>
    
    <style><![CDATA[
      .node { fill: #eef4ff; stroke: #1f3653; stroke-width: 1.5; filter: url(#shadow); }
      .gateway { fill: #ffffff; stroke: #8a3cc6; stroke-width: 1.5; filter: url(#shadow); }
      .channel { fill: #fff7e6; stroke: #c77b00; stroke-width: 1.5; filter: url(#shadow); }
      
      /* Typography adjustments */
      .label { 
        font-family: "SFMono-Regular", Consolas, "Liberation Mono", monospace; 
        font-size: 11px; 
        fill: #1a1a1a; 
        text-anchor: middle;
        dominant-baseline: middle; 
        pointer-events: none;
      }
      .hint { 
        font-family: sans-serif;
        font-size: 9px; 
        fill: #6b6b6b; 
        text-anchor: middle;
        dominant-baseline: middle;
        pointer-events: none;
      }
      
      .edge { stroke: #4b4b4b; stroke-width: 1.5; fill: none; stroke-linejoin: round; }
    ]]></style>
    
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto" fill="#4b4b4b">
      <path d="M0,0 L10,3.5 L0,7 Z" />
    </marker>
  </defs>

  <g id="edges">
    <line class="edge" x1="110" y1="110" x2="135" y2="110" marker-end="url(#arrow)" />

    <path class="edge" d="M225 110 C 245 110, 245 50, 270 50" marker-end="url(#arrow)" />
    <line class="edge" x1="225" y1="110" x2="270" y2="110" marker-end="url(#arrow)" />
    <path class="edge" d="M225 110 C 245 110, 245 170, 270 170" marker-end="url(#arrow)" />

    <path class="edge" d="M380 50 C 405 50, 405 110, 422 110" marker-end="url(#arrow)" />
    <line class="edge" x1="380" y1="110" x2="422" y2="110" marker-end="url(#arrow)" />
    <path class="edge" d="M380 170 C 405 170, 405 110, 422 110" marker-end="url(#arrow)" />

    <line class="edge" x1="466" y1="110" x2="490" y2="110" marker-end="url(#arrow)" />
    <line class="edge" x1="580" y1="110" x2="593" y2="110" marker-end="url(#arrow)" />
  </g>

  <g transform="translate(20, 93)">
    <rect class="node" width="90" height="34" rx="6" />
    <text class="label" x="45" y="17">fetch</text>
    <text class="hint" x="45" y="42">raw_data</text>
  </g>

  <g transform="translate(135, 93)">
    <rect class="node" width="90" height="34" rx="6" />
    <text class="label" x="45" y="17">split</text>
    <text class="hint" x="45" y="42">batch_*</text>
  </g>

  <g transform="translate(270, 33)">
    <rect class="node" width="110" height="34" rx="6" />
    <text class="label" x="55" y="17">process_a</text>
  </g>

  <g transform="translate(270, 93)">
    <rect class="node" width="110" height="34" rx="6" />
    <text class="label" x="55" y="17">process_b</text>
  </g>

  <g transform="translate(270, 153)">
    <rect class="node" width="110" height="34" rx="6" />
    <text class="label" x="55" y="17">process_c</text>
  </g>

  <g transform="translate(448, 110)">
    <circle class="gateway" r="18" />
    <text class="label" y="0" style="font-size: 9px;">sync</text>
    <text class="label" y="-28">barrier</text>
  </g>

  <g transform="translate(490, 93)">
    <rect class="node" width="90" height="34" rx="6" />
    <text class="label" x="45" y="17">merge</text>
  </g>

  <g transform="translate(610, 110)">
    <circle class="channel" r="17" />
    <text class="label" y="1">final</text>
  </g>

</svg>